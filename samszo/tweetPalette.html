<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Tweet Palette</title>
<script src="https://d3js.org/d3.v4.min.js"></script>
<style type="text/css">

div{ 
    heigth: 100%;
    width: 100%;
}

iframe{ 
    heigth: 600px;
    width: 800px;
}

</style>


</head>
<body>

<div id='palettes'>
</div>

<script>
var dataForm;
var url = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vT4vIu2pcoPH6Vng35aQzwRAxQV9ogt8B9fyp-3cr1aVEdEh5rAhDfj_sB7OYoeLRZGalhq1trkCLRd/pub?gid=2097717787&single=true&output=csv';
//var url = "data/LPDesignWebMobile_17-18.csv";        
d3.csv(url, function(data) {
	dataForm = data;
	
	var plts = d3.select('#palettes').selectAll("div").data(dataForm).enter()
	.append('div')
		.attr('class','palette')
		.attr('id',function(d, i){
			return 'plt'+i;
		});		
	plts.append('div').attr('id',function(d, i){
		return 'Titre'+i;
	})
	plts.append('div').attr('id',function(d, i){
		return 'svg'+i;
	})
	plts.append('div').attr('id',function(d, i){
		return 'iframe1'+i;
	})
	plts.append('div').attr('id',function(d, i){
		return 'iframe2'+i;
	})
	plts.each(chargeSVG);

	
	/*
	*/
});

function chargeSVG(d, i){
	//charge le svg
	var url = "../"+d['Votre compte GitHub']+"/palette/tweet.svg";
	console.log(url);
	d3.xml(url,function(node) {	 
		//return true;
			//importe le curseur			
			if(node){
				var importedNode = document.importNode(node.documentElement, true);
				d3.select('#svg'+i).text("BRAVO "+d['Votre prénom']).node().appendChild(importedNode);	  
			}else
				d3.select('#svg'+i).html("OUUUUUUUUUUUU !!! "+d['Votre prénom']);
	});	  			
	//charge la page HTML
	var url1 = "../"+d['Votre compte GitHub']+"/tweetPalette.html";
	d3.select('#iframe1'+i).append("iframe").attr("src",url1);	  
	var url2 = "../"+d['Votre compte GitHub']+"/palette/tweetPalette.html";
	d3.select('#iframe2'+i).append("iframe").attr("src",url2);	  
	d3.select('#Titre'+i).html("<h1>"+d['Votre prénom']+"</h1><a href='"+url1+"'>"+url1+"</a><br/><a href='"+url2+"'>"+url2+"</a>");	  

}



</script>

</body>
</html>