<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!--
Design by TEMPLATED
http://templated.co
Released for free under the Creative Commons Attribution License

Name       : Photoshoot 
Description: A two-column, fixed-width design with dark color scheme.
Version    : 1.0
Released   : 20110926

-->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>Trombinoscope des étudiants en L3 DWM (2017-2018)</title>
<link href="style.css" rel="stylesheet" type="text/css" media="screen" />
<script src="https://d3js.org/d3.v4.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
<script type="text/javascript" src="jquery.poptrox-0.1.js"></script>
</head>
<body>
<script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<div id="header" class="container">
	<div id="logo">
		<h2><a href="#">Trombinoscope </a></h2>
		<p>Trombinoscope des étudiants en L3 DWM (2017-2018) </p>
	</div>

</div>
<!-- end #header -->
<div id="poptrox">
	<!-- start -->
	<ul class="cbp-rfgrid">
	<script>
				// Définition des variables globales.
				var urlFlickr = "https://api.flickr.com/services/rest/?method=flickr.photosets.getPhotos&api_key=79672885f8a018343cd8849f57e8a50a&photoset_id=72157686701939221&extras=original_format&format=json&jsoncallback=?";
				var cpt = 0;
				var tabEtudiants = [];
				// Récupération et traitement des données des étudiants dans le fichier "data/LPDesignWebMobile_17-18.csv".
				d3.csv("data/LPDesignWebMobile_17-18.csv", function(d)
				{
					return {numPhoto : d["num photo"], prenom : d["Votre prénom"], nom : d["Votre nom"]};
				}, function(data)
				{
				  // Copie du contenu du tableau d'objets "data" vers le tableau "tabEtudiants"
				  tabEtudiants = data;
				  // Tri des étudiants par numéro d'étudiant (croissant)
				  tabEtudiants.sort(function(etudiant1, etudiant2)
				  {
						return etudiant1.numPhoto - etudiant2.numPhoto;
				  });
				});
				// Récupération des photos sur flickr grâce à l'API.
				$.getJSON(urlFlickr, function(data)
				{
				    $.each(data.photoset.photo, function(i, item)
					 {
				      // Sockage de l'image dans une variable.
				      var photo = 'http://farm' + item.farm + '.static.flickr.com/' + item.server + '/' + item.id + '_' + item.secret + '_b.jpg';
						// Sockage de l'url dans une variable.
				      var url = 'http://farm' + item.farm + '.static.flickr.com/' + item.server + '/' + item.id + '_' + item.secret + '_c.jpg';
						// Ajout des photos à la liste de classe "cbp-rfgrid" et affichage des noms.
				      $("<img/>").attr({src: photo, alt: item.title}).appendTo(".cbp-rfgrid").wrap("<li><a href=' "+ url +"' title=' "+ item.title+" ' ></a><p>"+ tabEtudiants[cpt].prenom + " " + tabEtudiants[cpt].nom + "</p></li>");
						// Incrémentation du compteur.
						cpt++;
				    });
				});

				</script>
	
	</ul>
	<br class="clear" />
	<script type="text/javascript">
		$('#gallery').poptrox();
		</script>
	<!-- end -->
</div>
<div id="page">
	<div id="bg1">
		<div id="bg2">
			<div id="bg3">
			
			
			</div>
		</div>
	</div>
</div>

<!-- end #footer -->
</body>
</html>
